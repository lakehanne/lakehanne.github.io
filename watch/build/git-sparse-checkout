<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Cloning specific folders from git</title>
    <meta name="viewport" content="width=device-width,  initial-scale=1, maximum-scale=1">
    <meta name="description" content="To discover and understand.
">
    <link rel="canonical" href="git-sparse-checkout">
    <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Lekan Ogunmolu posts" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <link href="/vendor/css/bootstrap.min.css" rel="stylesheet">
    <link href="/vendor/css/font-awesome.min.css" rel="stylesheet">
    <link href="/vendor/css/academicons.min.css" rel="stylesheet">
    <link href="/vendor/pygments/default.css" rel="stylesheet">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-3698471-23', 'auto');
      ga('send', 'pageview');
    </script>

    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="row">
          <div class="col-md-10 col-md-offset-1">
            <div class="navbar-header">
                <a href="/" class="navbar-brand">
                    <div>
                        <img src="/downloads/me-style.jpg" class="img-circle" alt="Me" style="width:20px;height:20px;" ></img>
                        Lekan Ogunmolu &nbsp; &nbsp; &nbsp;
                    </div>
                </a>
              <button class="navbar-toggle" type="button" data-toggle="collapse"
                      data-target="#navbar-main">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <div class="navbar-collapse collapse" id="navbar-main">
              <ul class="nav navbar-nav">
                <li>
                  <a href="/blog">Blog &nbsp; &nbsp; &nbsp;</a>
                </li>
                <li>
                  <a href="/quotes">Fave. Quotes &nbsp; &nbsp; &nbsp;</a>
                </li>
                <li> 
                  <a href="/resume">CV &nbsp; &nbsp; &nbsp;</a>
                </li> 
                <li>
                  <a href="/about">About&nbsp; &nbsp; &nbsp;</a>
                </li>

                <li>
                  <div style="float:right; margin-top:20px; margin-right:40px;">
                  <a href="/feed.xml">
                    <img src="/downloads/rssicon.svg" width="20">
                  </a>
                  </div>
                  </a>
                </li>
              </ul>
              <nav class="site-nav">
                <a href="#" class="menu-icon">
                  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                     viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
                    <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
                      h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
                      h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
                      c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                  </svg>
                </a>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
</head>

    <br>
    <body>

    <!-- <header class="site-header">

  <div class="wrap">

    <div style="float:left; margin-top:10px; margin-right:10px;">
    <a href="/feed.xml">
      <img src="/downloads/rssicon.svg" width="40">
    </a>
    </div>

    <a class="site-title" href="/">Lekan Ogunmolu</a>
    
    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
          <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
            h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
            h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
            c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
          <a class="page-link" href="/index.html">Lekan Ogunmolu</a>
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>
  </div>

</header>
 -->

    <div class="page-content">
      <div class="wrap">

      <div class="post">

    

  <header class="post-header">
    <h1>Cloning specific folders from git</h1>
    <p class="meta">Mar 28, 2016</p>
  </header>

  <article class="post-content">
  <!--##Table of Contents
###[Sparse Checkout](#sparse-checkout)
###[SVN Checkout](#svn-checkout)
## Directory && Sub-directory checkout from git repos-->

<p>This is a relatively newie but a goodie.  Have you ever been stuck trying to clone specific folders from a <code>git</code> repo recently?</p>

<p>Well, starting from <code>git 1.9</code>, this feature is now part of git features. For the sake of illustration, let’s say we want to retrieve only the <a href="https://github.com/PointCloudLibrary/pcl/tree/master/examples">examples</a> directory of the point cloud repo commited at the <a href="https://github.com/PointCloudLibrary">point cloud library git page</a>.</p>

<h3 id="sparse-checkout">Sparse-Checkout</h3>
<p>A new feature called <a href="https://git-scm.com/docs/git-read-tree/">sparse checkout</a> allows us to sparsely populate the working directory by using skip-worktree bit to inform <code>GIT</code> if the file in the working directory deserves a look. <i>git read-tree</i> and other merge commands native to <code>git</code> such as <code>checkout</code>, <code>merge</code>, or <code>pull</code> are useful in maintaining the skip-working tree bitmap and working directory update.</p>

<p>A paraphrased quote from the manual here:</p>

<p>”<code>$GIT_DIR/info/sparse-checkout</code> defines the skip-worktree reference bitmap. When git read-tree needs to update the working directory, it resets the skip-worktree bit in the index based on this file, which uses the same syntax as .gitignore files. If an entry matches a pattern in this file, skip-worktree will not be set on that entry. Otherwise, skip-worktree will be set.</p>

<p>Then it compares the new skip-worktree value with the previous one. If skip-worktree turns from set to unset, it will add the corresponding file back. If it turns from unset to set, that file will be removed.</p>

<p>While <code>$GIT_DIR/info/sparse-checkout</code> is usually used to specify what files are in, you can also specify what files are not in, using negate patterns. For example, to remove the file unwanted:</p>

<p>Another tricky thing is fully repopulating the working directory when you no longer want sparse checkout. You cannot just disable “sparse checkout” because skip-worktree bits are still in the index and your working directory is still sparsely populated. You should re-populate the working directory with the $GIT_DIR/info/sparse-checkout file content as follows:</p>

<p>So to check out the pcl examples directory for example, we could combine the <code>sparse checkout</code> and <code>shallow clone</code> features. By using the <code>shallow clone</code> feature, we cut off the history and the <code>sparse check out</code> only pulls files matching the pattern(s) we specify.</p>

<p>Take a look at the following example:
&lt;pre class="terminal"&gt;<code>
$ mkdir pcl-examples
$ cd pcl-examples								#make a directory we want to copy folders to
$ git init                            			#initialize the empty local repo
$ git remote add origin -f https://github.com/PointCloudLibrary/pcl.git     #add the remote origin
$ git config core.sparsecheckout true			#very crucial. this is where we tell git we are checking out specifics
$ echo "examples/*" &gt;&gt; .git/info/sparse-checkout" #recursively checkout examples folder
$ git pull --depth=2 origin master			#go only 2 depths down the examples directory
</code>&lt;/pre&gt;</p>

<h4 id="explanation">Explanation</h4>

<p>The line
                  &lt;pre class="terminal"&gt;<code>$git remote add origin -f https://github.com/PointCloudLibrary/pcl.git </code>&lt;/pre&gt;</p>

<p>adds a remote named <name> e.g. a repository given by <url>.</url></name></p>

<p>It does not create nor update remote working branches by any chance. We do that by adding the “-f” or “–fetch” argument to update all remote tracking branches in our index. Note that this merely updates the git index. The files nor folders are as yet not populated.</p>

<p>The files are updated in our <code>pcl-examples</code> directory with the next line’s command.</p>

<p>Since we are cloning everything in the examples directory –which, by the way, have a depth of 2 – we pull every subdirectory and file under the examples folder by doing:</p>

<pre class="terminal"><code>$ git pull --depth=2 origin master</code></pre>

<h3 id="svn-checkout">SVN Checkout</h3>

<p>If you are using <code>svn</code> instead of git, there is a straightforward way to do this. Simply cd into your working directory and replace the “<code>/tree/master</code>” path within the <code>url</code> with <code>trunk</code>. To clone the subdirectory <code>examples</code> in the point cloud git repo for example, using <code>svn</code>, we would do the following in terminal</p>

<pre class="terminal"><code>$ svn checkout https://github.com/PointCloudLibrary/pcl/trunk/examples</code></pre>

  </article>

  <!-- mathjax -->
  
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  <!-- disqus comments -->
 
 <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'patmeansnoble'; // required: replace example with your forum shortname
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  

</div>


     <!--<nav class="nav-primary" role="navigation" >
    <ul>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
        <li>
        	 <a class= "post-link" href=""></a>
        </li>
        
    </ul>
</nav>
-->
      </div>
    </div>

    <head>

 <!--Font Awesome -->
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <footer class="site-footer">

  <div class="wrap">

    <!-- <h2 class="footer-heading">Lekan Ogunmolu</h2> -->

    <div class="footer-col-1 column">
      <ul>
        <li>
          <a class="github-button" href="https://github.com/lakehanne" data-style="mega" data-count-href="/lakehanne/followers" aria-label="Follow @lakehanne on GitHub"></a>
        </li>
      </ul>

        <ul><li>
          <a href="https://twitter.com/patmeansnoble" target="_blank" ><img src = "/downloads/TwitterLogo_blue.png" width="16%", height="17%"></a>
        </li></ul>
    </div>

    <div class="footer-col-2 column">

      <ul>
        
        <li>
          <a href="https://www.quora.com/Olalekan-Ogunmolu" target="_blank"><img src="/downloads/quora.svg" width="12%", height="5%"></a>

        </li>
        
      </ul>


      <ul>
        
        <li>
          <!-- <a href="mailto:patlekno@icloud.com"><i class="fa fa-fw fa-envelope-square"> Email</i></a> -->
          <a href="mailto:patlekno@icloud.com" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-o"></i></a>

        </li>
      </ul>
      

    </div>

    <div class="footer-col-3 column">
      <p class="text"><b>To discover and understand.
</b></p>
    </div>

  </div>
<script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
</footer>

</head>


    </body>
</html>
